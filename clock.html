<!--
 ::::::::  :::::::::  ::::::::::     ::: ::::::::::: :::::::::: :::::::::       :::::::::  :::   :::
:+:    :+: :+:    :+: :+:          :+: :+:   :+:     :+:        :+:    :+:      :+:    :+: :+:   :+: :+:
+:+        +:+    +:+ +:+         +:+   +:+  +:+     +:+        +:+    +:+      +:+    +:+  +:+ +:+
+#+        +#++:++#:  +#++:++#   +#++:++#++: +#+     +#++:++#   +#+    +:+      +#++:++#+    +#++:
+#+        +#+    +#+ +#+        +#+     +#+ +#+     +#+        +#+    +#+      +#+    +#+    +#+
#+#    #+# #+#    #+# #+#        #+#     #+# #+#     #+#        #+#    #+#      #+#    #+#    #+#    #+#
 ########  ###    ### ########## ###     ### ###     ########## #########       #########     ###



	:::     ::::    ::: :::::::::  :::::::::  :::::::::: :::       :::       ::::::::  :::::::::: :::::::::   :::::::: :::::::::::
  :+: :+:   :+:+:   :+: :+:    :+: :+:    :+: :+:        :+:       :+:      :+:    :+: :+:        :+:    :+: :+:    :+:    :+:
 +:+   +:+  :+:+:+  +:+ +:+    +:+ +:+    +:+ +:+        +:+       +:+      +:+        +:+        +:+    +:+ +:+           +:+
+#++:++#++: +#+ +:+ +#+ +#+    +:+ +#++:++#:  +#++:++#   +#+  +:+  +#+      :#:        +#++:++#   +#++:++#:  +#++:++#++    +#+
+#+     +#+ +#+  +#+#+# +#+    +#+ +#+    +#+ +#+        +#+ +#+#+ +#+      +#+   +#+# +#+        +#+    +#+        +#+    +#+
#+#     #+# #+#   #+#+# #+#    #+# #+#    #+# #+#         #+#+# #+#+#       #+#    #+# #+#        #+#    #+# #+#    #+#    #+#
###     ### ###    #### #########  ###    ### ##########   ###   ###         ########  ########## ###    ###  ########     ###
-->
<!DOCTYPE html><html><head><meta charset="utf-8">
<title>Clock (via Canvas Engine)</title>
<script src="canvasengine.js"></script>
<style>
body {
	margin: 0;
	padding: 0;
}

#canvaspane {
	cursor: default;
}
</style>
</head>
<body>
<div id="content">
<div id="canvaspane">
<canvas id="canvas1" width="100" height="100"></canvas>
</div>
</div>
<script>
var time_second = 0,
	center = 200,
	second_radius = 100,
	second_angle = 3 * HALF_PI,
	second_interval = PI / 30,
	minute_radius = 100,
	minute_angle = 3 * HALF_PI,
	minute_interval = second_interval / 60,
	hour_radius = 50,
	hour_angle = 3 * HALF_PI,
	hour_interval = minute_interval / 12;

const drawUI = function(){
	background(86, 99, 163); // muted indigo, periwinkle blue
	textSize(12);
	fill(240, 126, 65); // warm orange, pumpkin, burnt orange
	text('Second: ' + time_second, 10, 20);
	text('Minute: ' + minute(), 10, 40);
	text('Hour: ' + (hour() % 12), 10, 60);
	text('M Angle: ' + minute_angle, 10, 80);
	text('H Angle: ' + hour_angle, 10, 100);
	text('S Angle: ' + second_angle, 10, 120);
	textSize(30);
	fill(255, 255, 255);
	text('12', 180, 47);
	text('3', 360, 208);
	text('6', 192, 375);
	text('9', 25, 208);
};

// Draw a clock hand adjusted for stroke thickness so the visible hand
// starts exactly at the center and ends exactly at the target radius.
const drawHand = function(centerXY, radius, angle, thickness, strokeColor){
	const ux = cos(angle), uy = sin(angle);
	const half = thickness / 2;
	const startX = centerXY + ux * half;
	const startY = centerXY + uy * half;
	const endX = centerXY + ux * (radius - half);
	const endY = centerXY + uy * (radius - half);
	strokeWeight(thickness);
	if (Array.isArray(strokeColor)) {
		stroke(strokeColor[0], strokeColor[1], strokeColor[2]);
	} else {
		stroke(strokeColor);
	}
	line(startX, startY, endX, endY);
};

const calculateAngles = function(){
	const s = second();
	const m = minute();
	const h = hour() % 12;
	time_second = s;
	// Top (12 o'clock) is 3 * PI / 2. Advance each hand proportionally.
	second_angle = (3 * HALF_PI + s * second_interval) % TWO_PI;
	minute_angle = (3 * HALF_PI + (m * 60 + s) * minute_interval) % TWO_PI;
	hour_angle   = (3 * HALF_PI + ((h * 3600) + (m * 60) + s) * hour_interval) % TWO_PI;
};

var draw = function(){
	calculateAngles();
	drawUI();
	// Minute hand (warm orange, pumpkin, burnt orange)
	drawHand(center, minute_radius, minute_angle, 20, [240, 126, 65]);
	// Hour hand (vivid redâ€‘orange)
	drawHand(center, hour_radius, hour_angle, 20, [207, 62, 29]);
	// Second hand (black)
	drawHand(center, second_radius, second_angle, 2, [0, 0, 0]);
};

window.onload = function(){
	window.canvas = new Canvas(document.getElementById("canvas1"));
	window.ctx = canvas.ctx;
	canvas.draw = throttle(window.draw, 1000);
	canvas.run();
};
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-42786295-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-42786295-1');
</script>
</body>
</html>
